# -*- coding: UTF-8 -*-
# import re
import numpy as np
import faiss

#
# f = open("./testVector", "r")
# vectorStr = f.read()
# temp = vectorStr.replace('\n', ' ')
# str = re.sub(' +', ',', temp)
# print(str)



v = [0.14065558,-0.11107444,-0.54499465,-0.12053467,0.36461687,0.009463385,0.8178803,-0.027502961,0.01309377,-0.16461557,0.11732584,-0.2415809,0.11390117,0.49095216,0.23477606,0.08151694,-0.3760504,0.86181176,0.45081517,-0.1992951,0.53497785,0.30242884,-0.20860732,-0.06626375,0.3160248,0.11417642,0.04617741,0.8263651,0.1614261,-0.27058104,0.25271207,-0.426907,-0.54269993,0.47475207,0.2537305,0.09703861,0.11339271,-0.8865619,-0.26693445,-0.37189263,0.291535,0.21150413,-0.50707227,-0.22765046,-0.27760684,-0.1784524,0.21648353,0.21993387,0.23859318,0.08988262,0.9869596,-0.43798077,-0.10137212,-0.03882029,-0.6259606,0.8559942,0.10193516,0.7460652,0.11661668,0.8417428,-0.5633521,0.03986931,0.3396565,0.4932455,-0.14365721,-0.7085177,-0.15689285,-0.4086004,0.34670368,-0.340689,-0.1534407,0.5243982,-0.029269394,-0.727732,-0.0003518667,-0.28861946,-0.1208047,-0.2839078,0.007938221,-0.3661723,-0.18415979,-0.15045045,0.10444556,0.13644582,0.733503,0.18333124,-0.5498732,-0.057711992,0.043903038,-0.007592473,0.07466399,0.16009337,0.05427,0.14573182,0.5891483,0.1725377,0.43306714,0.10315432,-0.7002421,0.94475526,-0.19786882,-0.08236279,0.017912414,-0.18590416,0.12681857,0.011182424,0.041596673,-0.0782529,-0.1882636,-0.2899536,0.24655923,1.3366416,-0.71306324,0.26474577,0.419035,-0.34825745,0.02485713,-0.06369344,0.017154455,-0.32493898,-0.11393213,-0.031882785,0.070903294,0.5709549,0.7401405,-0.005208757,-0.3796703,0.11197434,0.14614935,-0.25281328,-0.035147294,0.006694652,0.3265342,0.3962965,0.00034893677,0.015605865,0.13320714,0.40461332,0.50417614,0.5517001,0.03790724,-0.24442723,-0.08442457,0.069881186,-0.07964255,-0.5407637,0.40919557,-0.43082023,-0.2982636,-0.48716348,0.109914035,-0.32397854,-0.15499759,-0.13484618,0.28043115,-0.27636054,-0.07901565,-0.24647579,-0.29263455,0.51081103,-0.40976074,0.08011323,0.06594247,-0.30257204,0.08073278,0.08810489,-0.37431774,-0.75996923,-0.35444903,0.423056,0.18551826,-0.13431248,-0.42386162,-0.64523107,0.3490339,0.040720426,-0.22809458,-0.04077947,-0.04032302,-0.43158537,0.21131964,-0.093294054,0.09546736,0.5331354,-0.2972622,0.108347476,0.49088502,0.65816617,-0.35326943,-0.0845224,0.38767618,0.3481635,0.09590158,0.09155978,-0.4631735,0.42895016,0.211576,0.38319263,-0.014299303,0.18323667,-0.4160778,0.62965536,-0.0053469464,-0.035615534,0.35541126,-0.2180146,-0.32715535,0.317695,0.0028885826,-0.12392239,-0.3309551,0.41807902,0.067379855,-0.5666532,-0.54008627,0.22907844,-0.0015808418,-0.6045991,-0.13696094,-0.30118334,0.042129364,0.3197644,0.3407019,0.23172304,-0.12394766,0.07180844,-0.60667187,-0.693913,-0.074616924,0.20580757,-0.23074007,0.104655325,0.35062188,0.021707885,-0.1252685,0.38131726,0.15585573,-0.047433272,-0.33478588,0.42106313,-0.62866163,0.73636353,0.03668601,-0.23612723,-0.20884009,0.031191874,-0.4814313,0.4166881,-0.047135465,-0.056868047,0.16189358,0.05780439,-0.28785896,0.14119475,-0.3020624,0.5370877,0.34769502,0.026054118,-0.16948393,0.1384879,0.71241945,0.031790186,0.16381311,-0.20832694,-0.57963943,0.29218414,0.2580585,0.11348876,0.31507167,-0.10613344,0.76651585,-0.39844444,-0.14463918,0.21063116,0.056458272,0.20733422,-0.37530378,0.3398459,0.021148633,0.21805397,0.19603142,0.3821104,-0.30943117,-0.36582476,-0.27395535,-0.26319903,0.38000023,-0.08271438,-0.18914583,-0.9225663,0.594166,-0.23846331,-0.3555134,-0.38890132,0.4187984,0.14792185,-0.13637778,0.21000996,-0.116384275,0.0399176]
v = np.array(v).astype("float32")
index_file_path = "/Users/huangqq/PycharmProjects/faiss-search/index_file/c579da36fa77d1be7cc53bb9d7044038/index"
index = faiss.read_index(index_file_path)

xq = np.atleast_2d(v)

scores, neighbors = index.search(xq, 20)

print(neighbors)